{
  "$id": "https://knowledge.nvo987.us/v1/schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",

  "title": "NVO987 Knowledge Base v1 Schema",
  "type": "object",

  "$defs": {

    "concept": {
      "type": "object",
      "required": ["id", "type", "title", "definition", "epistemic_status", "created"],
      "properties": {
        "id": { "type": "string", "format": "uri" },
        "type": { "const": "concept" },
        "title": { "type": "string" },
        "definition": { "type": "string" },
        "epistemic_status": { "type": "string" },
        "created": { "type": "string", "format": "date" },
        "label": { "type": "string" },
        "notes": { "type": "string" },
        "supported_by": {
          "type": "array",
          "items": { "type": "string", "format": "uri" }
        }
      },
      "additionalProperties": false
    },

    "claim": {
      "type": "object",
      "required": ["id", "type", "claim", "derived_from", "created"],
      "properties": {
        "id": { "type": "string", "format": "uri" },
        "type": { "const": "claim" },
        "claim": { "type": "string" },
        "derived_from": {
          "type": "string",
          "format": "uri"
        },
        "created": { "type": "string", "format": "date" },
        "confidence": { "type": "number", "minimum": 0, "maximum": 1 },
        "scope": { "type": "string" },
        "supported_by": {
          "type": "array",
          "items": { "type": "string", "format": "uri" }
        }
      },
      "additionalProperties": false
    },

    "source": {
      "type": "object",
      "required": ["id", "type", "media", "title", "file"],
      "properties": {
        "id": { "type": "string", "format": "uri" },
        "type": { "const": "source" },
        "media": { "type": "string" },
        "title": { "type": "string" },
        "file": { "type": "string" },
        "immutable": { "type": "boolean" },
        "citation": { "type": "string" },
        "year": { "type": "integer" },
        "author": { "type": "string" },
        "authorial_framework": { "type": "string" }
      },
      "additionalProperties": false
    },

    "vector": {
      "type": "object",
      "required": ["id", "corpus_id", "vector_type", "semantic_axes", "created"],
      "properties": {
        "id": { "type": "string", "format": "uri" },
        "corpus_id": { "type": "string", "format": "uri" },
        "vector_type": { "type": "string" },
        "semantic_axes": {
          "type": "object",
          "additionalProperties": { "type": "number" }
        },
        "created": { "type": "string", "format": "date" },
        "embedding_hint": { "type": "string" }
      },
      "additionalProperties": false
    }
  }
}
